{% extends "qr_detector/base.html" %}
{% block content %}
<section class="card">
    <h2>Scan History</h2>
    <p class="subtitle">Your recent scans.</p>

    <table class="history-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Time</th>
                <th>UPI ID</th>
                <th>Risk</th>
                <th>Score</th>
                <th>View</th>
            </tr>
        </thead>
        <tbody>
        {% for scan in scans %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ scan.created_at }}</td>
                <td>{{ scan.upi_id|default:"â€”" }}</td>
                <td><span class="risk-pill risk-{{ scan.risk_level|lower }}">{{ scan.risk_level }}</span></td>
                <td>{{ scan.ml_score|floatformat:2 }}</td>
                <td><a href="{% url 'scan_result' scan.id %}" class="link-view">Open</a></td>
            </tr>
        {% empty %}
            <tr><td colspan="6" class="empty-row">No scans yet.</td></tr>
        {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}
